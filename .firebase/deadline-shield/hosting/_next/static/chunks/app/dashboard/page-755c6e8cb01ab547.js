(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3185:function(e,r,n){Promise.resolve().then(n.bind(n,4985))},4985:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return h}});var t=n(7437),s=n(2265),l=n(5389),i=n(6410),a=n(5978),d=n(5434),o=n(7648),c=n(1439);let u={Starter:5,Pro:25,Enterprise:9999};function h(){let{user:e,profile:r,loading:n}=(0,l.a)(),[h,p]=(0,s.useState)([]),[g,f]=(0,s.useState)({name:"",url:"",frequency:"Daily"}),[y,x]=(0,s.useState)(""),[j,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!e)return;let r=(0,a.IO)((0,a.hJ)(i.db,"sources"),(0,a.ar)("userId","==",e.uid)),n=(0,a.cf)(r,e=>{let r=[];e.forEach(e=>{r.push({id:e.id,...e.data()})}),p(r)});return()=>n()},[e]);let m=async r=>{if(r.preventDefault(),x(""),b(!0),e)try{let e=(0,d.V1)(i.wk,"createSource");await e({name:g.name,url:g.url,frequency:g.frequency}),f({name:"",url:"",frequency:"Daily"})}catch(e){x(e.message)}finally{b(!1)}},v=async e=>{if(confirm("Are you sure?"))try{await (0,a.oe)((0,a.JU)(i.db,"sources",e))}catch(e){alert(e.message)}},S=async e=>{if(confirm("Confirm you have manually verified this source?"))try{await (0,a.r7)((0,a.JU)(i.db,"sources",e),{needsCheck:!1,lastStatus:"Verified",lastVerifiedAt:(0,a.Bt)(),consecutiveFailures:0})}catch(e){alert("Error updating status: "+e.message)}};return n?(0,t.jsx)("p",{children:"Loading..."}):e?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)("h1",{children:"Dashboard"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{children:["Plan: ",(0,t.jsx)("strong",{children:null==r?void 0:r.plan})]}),(0,t.jsxs)("span",{style:{marginLeft:15},children:["Sources: ",h.length," / ",u[(null==r?void 0:r.plan)||"Starter"]]}),(0,t.jsx)(o.default,{href:"/changes",style:{marginLeft:20,color:"blue"},children:"View Change Logs"})]})]}),(0,t.jsxs)("div",{style:{background:"#f5f5f5",padding:20,borderRadius:8,margin:"20px 0"},children:[(0,t.jsx)("h3",{children:"Add New Source"}),y&&(0,t.jsx)("p",{style:{color:"red"},children:y}),(0,t.jsxs)("form",{onSubmit:m,style:{display:"flex",gap:10,flexWrap:"wrap"},children:[(0,t.jsx)("input",{placeholder:"Name (e.g. PMI Exam Updates)",value:g.name,onChange:e=>f({...g,name:e.target.value}),required:!0,style:{padding:8,flex:1}}),(0,t.jsx)("input",{placeholder:"URL (https://...)",type:"url",value:g.url,onChange:e=>f({...g,url:e.target.value}),required:!0,style:{padding:8,flex:2}}),(0,t.jsxs)("select",{value:g.frequency,onChange:e=>f({...g,frequency:e.target.value}),style:{padding:8},children:[(0,t.jsx)("option",{value:"Daily",children:"Daily"}),(0,t.jsx)("option",{value:"Weekly",children:"Weekly"})]}),(0,t.jsx)("button",{type:"submit",disabled:j,style:{padding:"8px 16px",background:"#0070f3",color:"white",border:"none",borderRadius:4},children:j?"Adding...":"Add Source"})]})]}),(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:20},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#eee",textAlign:"left"},children:[(0,t.jsx)("th",{style:{padding:10},children:"Name"}),(0,t.jsx)("th",{style:{padding:10},children:"URL"}),(0,t.jsx)("th",{style:{padding:10},children:"Frequency"}),(0,t.jsx)("th",{style:{padding:10},children:"Last Status"}),(0,t.jsx)("th",{style:{padding:10},children:"Actions"})]})}),(0,t.jsxs)("tbody",{children:[h.map(e=>{var r,n;let s="Changed"===e.lastStatus?"red":"Error"===e.lastStatus?"orange":(null===(r=e.lastStatus)||void 0===r?void 0:r.includes("Blocked"))?"darkred":(null===(n=e.lastStatus)||void 0===n?void 0:n.includes("Needs"))?"#b8860b":"green";return(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #ddd"},children:[(0,t.jsxs)("td",{style:{padding:10},children:[e.name,e.manualOnly&&(0,t.jsx)("span",{style:{fontSize:"0.7em",background:"#333",color:"white",padding:"2px 4px",borderRadius:3,marginLeft:5},children:"MANUAL"})]}),(0,t.jsx)("td",{style:{padding:10},children:(0,t.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Link"})}),(0,t.jsx)("td",{style:{padding:10},children:e.frequency}),(0,t.jsxs)("td",{style:{padding:10},children:[(0,t.jsx)("span",{style:{color:s,fontWeight:"bold"},children:e.lastStatus}),"Changed"===e.lastStatus&&e.lastChangeSeverity&&(0,t.jsxs)("span",{style:{marginLeft:8,padding:"2px 6px",borderRadius:4,fontSize:"0.8em",color:"white",backgroundColor:"CRITICAL"===e.lastChangeSeverity?"red":"HIGH"===e.lastChangeSeverity?"orange":"MEDIUM"===e.lastChangeSeverity?"#DAA520":"green"},children:[e.lastChangeSeverity," (",e.lastChangeScore,")"]}),e.lastChecked&&(0,t.jsxs)("div",{style:{fontSize:"0.8em",color:"#666"},children:["Checked: ",new Date(1e3*e.lastChecked.seconds).toLocaleDateString()]}),e.needsCheck&&(0,t.jsx)("div",{style:{marginTop:5},children:(0,t.jsx)("button",{onClick:()=>e.id&&S(e.id),style:{fontSize:"0.8em",background:"green",color:"white",border:"none",padding:"4px 8px",cursor:"pointer",borderRadius:4},children:"Mark Verified"})})]}),(0,t.jsx)("td",{style:{padding:10},children:(0,t.jsx)("button",{onClick:()=>e.id&&v(e.id),style:{color:"red",background:"none",border:"none",cursor:"pointer"},children:"Delete"})})]},e.id)}),0===h.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,style:{padding:20,textAlign:"center",color:"#666"},children:"No sources monitored yet. Add one above."})})]})]}),(0,t.jsx)(c.Z,{})]}):(0,t.jsx)("div",{style:{padding:20},children:(0,t.jsx)(o.default,{href:"/auth/login",children:"Please Login"})})}},1439:function(e,r,n){"use strict";n.d(r,{Z:function(){return s}});var t=n(7437);function s(){return(0,t.jsx)("footer",{style:{marginTop:40,padding:20,borderTop:"1px solid #ccc",fontSize:"0.8rem",color:"#666"},children:(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"DISCLAIMER:"})," This is an informational monitoring tool. Users are responsible for compliance decisions. Links point to original authoritative sources. Deadline-Shield does not provide legal advice."]})})}},5389:function(e,r,n){"use strict";n.d(r,{AuthProvider:function(){return c},a:function(){return o}});var t=n(7437),s=n(2265),l=n(3301),i=n(5978),a=n(6410);let d=(0,s.createContext)({user:null,profile:null,loading:!0,refreshProfile:async()=>{}}),o=()=>(0,s.useContext)(d),c=e=>{let{children:r}=e,[n,o]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[h,p]=(0,s.useState)(!0),g=async e=>{try{let n=(0,i.JU)(a.db,"users",e),t=await (0,i.QT)(n);if(t.exists())u(t.data());else{var r;null===(r=a.I8.currentUser)||void 0===r||r.email,u(null)}}catch(e){console.error("Error fetching profile",e)}};(0,s.useEffect)(()=>{let e=(0,l.Aj)(a.I8,async e=>{o(e),e?await g(e.uid):u(null),p(!1)});return()=>e()},[]);let f=async()=>{n&&await g(n.uid)};return(0,t.jsx)(d.Provider,{value:{user:n,profile:c,loading:h,refreshProfile:f},children:r})}},6410:function(e,r,n){"use strict";n.d(r,{I8:function(){return d},db:function(){return o},wk:function(){return c}});var t=n(738),s=n(3301),l=n(5978),i=n(5434);let a=(0,t.C6)().length?(0,t.C6)()[0]:(0,t.ZF)({apiKey:"AIzaSyCsTNwAAhZj29qsY2jrMhE-mWJPvDFLboE",authDomain:"deadline-shield.firebaseapp.com",projectId:"deadline-shield",storageBucket:"deadline-shield.firebasestorage.app",messagingSenderId:"175539559536",appId:"1:175539559536:web:e46a23776705c8b93668b5"}),d=(0,s.v0)(a),o=(0,l.ad)(a),c=(0,i.$C)(a,"us-central1")}},function(e){e.O(0,[358,139,943,972,72,971,117,744],function(){return e(e.s=3185)}),_N_E=e.O()}]);